var sp={statu:{nowPage:"ready"},consts:{pageTransition:200},util:{query:function(n,t){return document["querySelector"+(t?"All":"")](n)},_switchPageTimeOut:null,switchPage:function(n){var t=sp.statu.nowPage,i=sp.consts.pageTransition;n!=t&&($(".page."+t).style.opacity="0",clearTimeout(this._switchPageTimeOut),this._switchPageTimeOut=setTimeout((function(){sp.statu.nowPage=n,$(".page."+t).style.display="none",$(".page."+n).style.display="",setTimeout((function(){$(".page."+n).style.opacity="1"}),10)}),i))}},musiclist:null,infolist:null,mgroups:null,ready:{isReady:!1,setState:function(n,t){var i=$(".page.ready .state");i.innerText=n,i.className="state "+(t||"")},init:function(){$(".page.ready").addEventListener("click",(function(){if(sp.ready.isReady&&(sp.util.switchPage("groups"),localStorage.spNowplay&&localStorage.spMusiclist)){for(var n=parseInt(localStorage.spMusiclist),t=sp.mgroups[n].songs,i=localStorage.spNowplay,e=0;e<t.length;e++)if(t[e].mid==i)return sp.player.nowlistid=n,sp.player.musiclist=t,sp.player.play(e),void($(".playing-mini").style.right="0px");delete localStorage.spMusiclist,delete localStorage.spNowplay}}))}},groups:{init:function(){if(sp.ready.isReady){for(var n=sp.mgroups,t=0;t<n.length;t++){var i=n[t],e=[];i.has&&e.push.apply(e,this.gHas(i.has)),i.mids&&i.mids.forEach((function(n){var t=sp.musiclist.find((function(t){return t.mid==n}));t&&e.push(t)})),i.songs=e}var a=$(".group-list"),s="";n.forEach((function(n,t){s+=`<div class="group-item" data-index="${t}">\n                <div class="imgbox">\n                    <img src="${n.img}" alt="">\n                </div>\n                <div class="info">\n                    <div class="title">${n.name}</div>\n                    <div class="desc">${n.desc}</div>\n                </div>\n            </div>`})),a.innerHTML=s,a.querySelectorAll(".group-item").forEach((function(n,t){n.addEventListener("click",(function(){sp.songs.to(this.dataset.index)}))}))}},gHas:function(n){if(-1!=n.indexOf("*"))return sp.musiclist.filter((function(n){return-1==n.tag.indexOf("Legray")}));var t=[];return n.forEach((function(n){var i=n.split("=")[0],e=n.split("=")[1];if("tag"==i){var a=e.split("&");sp.musiclist.forEach((function(n){var i=!0;a.forEach((function(t){-1==n.tag.indexOf(t)&&(i=!1)})),t.forEach((function(t){t.mid==n.mid&&(i=!1)})),i&&t.push(n)}))}else"matchName"==i?sp.musiclist.forEach((function(n){if(n.name.indexOf(e)>-1){var i=!0;t.forEach((function(t){t.mid==n.mid&&(i=!1)})),i&&t.push(n)}})):"matchArtist"==i&&sp.musiclist.forEach((function(n){if(n.artist.indexOf(e)>-1){var i=!0;t.forEach((function(t){t.mid==n.mid&&(i=!1)})),i&&t.push(n)}}))})),t}},songs:{nowlist:null,nowgroup:null,to:function(n){this.nowlist=n,sp.util.switchPage("songs");var t=this.getGroup(n);$(".page.songs .cover img").src=t.img,$(".page.songs .group-info .name").innerText=t.name,$(".page.songs .group-info .desc").innerText=t.desc,this.drawList(t,n);try{$(".page.songs .active").scrollIntoView({behavior:"smooth",block:"center"})}catch(n){}},getGroup:function(n){return void 0===n&&(n=this.nowlist),JSON.parse(JSON.stringify(sp.mgroups[n]))},drawList:function(n,t){var i="";n.songs=this.sortList(n.songs),this.nowgroup=n,n.songs.forEach((function(n,t){i+=`<div class="item" data-index="${t}" data-mid="${n.mid}">\n                <div class="name">${n.name}</div>\n                <div class="artist">${n.artist}</div>\n            </div>`})),$(".page.songs .list").innerHTML=i,t==sp.player.nowlistid&&this.actItem(sp.player.mid),$(".page.songs .list .item",!0).forEach((function(n){n.addEventListener("click",(function(){sp.player.nowlistid=sp.songs.nowlist,sp.player.musiclist=sp.songs.nowgroup.songs,sp.player.play(parseInt(this.getAttribute("data-index"))),sp.util.switchPage("player"),$(".playing-mini").style.right="","DESTRUCTION 3,2,1"==this.querySelector(".name").innerText.trim()&&sp.player.sp()}))}))},sortList:function(n){var{mode:t,sort:i}=this.getSortMode();return 1==t?n.sort((function(n,t){return n.name.localeCompare(t.name)})):2==t&&n.sort((function(n,t){return n.artist.localeCompare(t.artist)})),1==i&&n.reverse(),n},getSortMode:function(){var n=parseInt(localStorage.spSort);n=isNaN(n)?0:n;var t=parseInt(localStorage.spSortMode);return{mode:t=isNaN(t)?0:t,sort:n}},init:function(){$(".page.songs .back").addEventListener("click",(function(){sp.util.switchPage("groups"),sp.songs.nowlist=null,$(".page.songs .list").innerHTML=""}));var{mode:n,sort:t}=this.getSortMode(),i=$(".page.songs .control .sort"),e=$(".page.songs .control .mode");i.innerText=["↓","↑"][t],e.innerText=["默认","字母","歌手"][n],i.addEventListener("click",(function(){t=0==t?1:0,i.innerText=["↓","↑"][t],localStorage.spSort=t,sp.songs.drawList(sp.songs.getGroup(),sp.songs.nowlist),sp.player.musiclist=sp.songs.nowgroup.songs;var n=$(".page.songs .list .item.active");n&&(sp.player.nowplay=parseInt(n.getAttribute("data-index")))})),e.addEventListener("click",(function(){n=0==n?1:1==n?2:0,e.innerText=["默认","字母","歌手"][n],localStorage.spSortMode=n,sp.songs.drawList(sp.songs.getGroup(),sp.songs.nowlist),sp.player.musiclist=sp.songs.nowgroup.songs;var t=$(".page.songs .list .item.active");t&&(sp.player.nowplay=parseInt(t.getAttribute("data-index")))}))},actItem:function(n){try{$(".page.songs .list .item",!0).forEach((function(n){n.className="item"})),$('.page.songs .list .item[data-mid="'+n+'"]').className="item active"}catch(n){}}},initer:{initState:0,initMusicList:function(){fetch("/mymusicbox2/musiclist-min.json").then((function(n){return n.json()})).then((function(n){sp.musiclist=n,sp.initer.initState++,sp.initer.finish()})).catch((function(n){sp.ready.setState("加载歌单失败","error")}))},initGroups:function(){fetch("./group-min.json").then((function(n){return n.json()})).then((function(n){sp.mgroups=n,sp.initer.initState++,sp.initer.finish()})).catch((function(n){sp.ready.setState("加载歌单组失败","error")}))},initInfos:function(){fetch("/mymusicbox2/info.json").then((function(n){return n.json()})).then((function(n){sp.infolist=n,sp.initer.initState++,sp.initer.finish()})).catch((function(n){sp.ready.setState("加载歌曲评价失败","error")}))},finish:function(){3==this.initState&&(sp.ready.isReady=!0,sp.ready.setState("点击进入"),sp.groups.init())}},player:{nowlistid:null,noticeinter:null,notice:function(n,t=function(){}){clearTimeout(this.noticeinter),$(".notice").innerText=n,$(".notice").onclick=t,$(".notice").style.display="block",this.noticeinter=setTimeout((function(){$(".notice").style.display="none",$(".notice").onclick=function(){}}),2e3)},colorfulImg:function(n,t){let i=document.createElement("img");function e(){sp.player.rs.push(musicapi._request("https://api.qjqq.cn/api/Imgcolor?img="+n,(function(n){if(n){var i=n.RGB.slice(1),e={r:parseInt(i.substring(0,2),16),g:parseInt(i.substring(2,4),16),b:parseInt(i.substring(4,6),16)},a=(e.r+e.g+e.b)/3>150;function s(n){return 256-(256-n)/2}var r=e.r/2+","+e.g/2+","+e.b/2,o=s(e.r)+","+s(e.g)+","+s(e.b);t("rgba("+e.r+","+e.g+","+e.b+",.5)",a,[["rgb("+r+")","rgba("+r+",.5)"],["rgb("+o+")","rgba("+o+",.5)"]])}else t("rgba(0,0,0,0)",-1)})))}i.src=n,i.crossOrigin="Anonymous",i.onload=function(){try{let e,o,l,c,u=document.createElement("canvas"),p=u.getContext&&u.getContext("2d"),g=-4,d=50,m=0,f={r:0,g:0,b:0};for(e=u.height=i.height,o=u.width=i.width,p.drawImage(i,0,0),c=p.getImageData(0,0,o,e).data,l=c.length;(g+=4*d)<l;)++m,f.r+=c[g],f.g+=c[g+1],f.b+=c[g+2];f.r=~~(f.r/m),f.g=~~(f.g/m),f.b=~~(f.b/m);var n=(f.r+f.g+f.b)/3>150;function a(n){return 256-(256-n)/2}var s=f.r/2+","+f.g/2+","+f.b/2,r=a(f.r)+","+a(f.g)+","+a(f.b);t("rgba("+f.r+","+f.g+","+f.b+",.5)",n,[["rgb("+s+")","rgba("+s+",.5)"],["rgb("+r+")","rgba("+r+",.5)"]])}catch(n){e()}},i.onerror=function(){e()}},formatTime:function(n){var t=Math.floor(n/60),i=Math.floor(n%60);return isNaN(t)?"00:00":(t<10&&(t="0"+t),i<10&&(i="0"+i),t+":"+i)},sp:function(){var n,t,i=10,e=50;function a(){var a=!0;document.body.style.transition="none",document.body.style.cursor="none",n=setInterval((function(){a=!a,$(".siquan-player").style.transform=a?"translateY(-"+i+"px)":"translateY("+i+"px)",sp.player.el.mode.click()}),50);var s=!0;t=setInterval((function(){document.body.style.opacity=Math.random()*(.01*e)+1-.01*e,s=!s,$(".siquan-player").style.transform=s?"translateX(-"+i+"px)":"translateX("+i+"px)",sp.player.el.mode.click()}),70)}$(".siquan-player").style.pointerEvents="none";var s=0;$("audio").addEventListener("timeupdate",(function(){var r=this.currentTime;if(0==s&r>=14.4&&(a(),s++),1==s&r>=20&&(e=10,i=4,s++),2==s&r>=20.5&&(e=50,i=10,s++),3==s&r>=22.7&&(e=10,i=4,s++),4==s&r>=23.2&&(e=50,i=10,s++),5==s&r>=24.2&&(e=20,i=8,s++),6==s&r>=26&&(e=60,i=60,s++),7==s&r>=36.5&&(e=20,i=5,s++),8==s&r>=38.5&&(e=80,i=80,s++),9==s&r>=44&&(e=20,i=5,s++),10==s&r>=45&&(e=80,i=80,s++),11==s&r>=50&&(e=20,i=5,s++),11==s&r>=61.5&&(e=100,i=120,s++),12==s&r>=73&&(e=10,i=5,s+=1),13==s&r>=78&&(clearInterval(n),clearInterval(t),document.body.style.transition="",document.body.style.opacity="1",document.body.classList.remove("light"),document.body.classList.add("dark"),e=100,i=10,s++),14==s&r>=91&&(a(),s++),15==s&r>=98&&(e=10,i=5,s++),16==s&r>=102&&(e=100,i=50,s++),17==s&r>=116&&(e=100,i=80,s++),18==s&r>=122.5&&(e=0,i=0,s++),19==s&r>=123.5&&(e=100,i=80,s++),20==s&r>=124.5&&(e=0,i=0,s++),21==s&r>=125.5&&(e=100,i=80,s++),22==s&r>=129&&(e=10,i=10,s++),23==s&r>=137&&(e=100,i=150,s++),24==s&r>=155){clearInterval(n),clearInterval(t),document.body.style.opacity="0";var o=["#000","#00f"],l=0;setInterval((function(){document.documentElement.style.backgroundColor=o[l],l=0==l?1:0}),1e3),s++}})),$("audio").addEventListener("ended",(function(){$("audio").src="",$("audio").remove()}))},resize:function(){var n=$("#resizer"),t=document.documentElement.clientWidth,i=document.documentElement.clientHeight;if(document.body.style.width=t+"px",document.body.style.height=i+"px",t<700)n.innerHTML="";else{var e=`.siquan-player .container .left .music-album-pic,\n            .pure .siquan-player .container .left .music-controls .pl .iconbtn.playbtn{\nwidth:${Math.min(.287*t,.5*i)}px;\nheight:${Math.min(.287*t,.5*i)}px;\n}\n.siquan-player .container .left .music-info .music-title{\nfont-size:${.02*t}px;\n}\n.iconbtn{\nwidth:${.06*i}px;\nheight:${.06*i}px;\n}\n.siquan-player .container .left .music-info .music-message{\nfont-size:${.012*t}px;\n}\n.siquan-player .container .left .music-controls .range{\nheight:${.0045*i}px;\n}\n.siquan-player .container .left .music-controls .range .r1{\nwidth:${.0105*i}px;\nheight:${.0105*i}px;\ntop:-${.003*i}px;\n}\n.siquan-player .container .left .music-controls .time{\nfont-size:${.012*t}px;\n}\n.siquan-player .container .left .music-controls .pl{\nwidth:${.06*i*3.75+60}px;\nheight:${.06*i*1.25}px;\n}\n.siquan-player .container .left .music-controls .pl .iconbtn{\nwidth:${.06*i*1.25}px;\nheight:${.06*i*1.25}px;\n}\n.siquan-player .container .right ul li{\nfont-size:${.019*t}px;\nline-height:${.038*t}px;\n}\n.siquan-player .container .right ul li.act{\nfont-size:${.034*t}px;\n}\n.dialog .actionbar{\nheight:${.06*i}px;\n}\n.dialog .actionbar .title{\nfont-size:${.025*i}px;\nline-height:${.06*i}px;\n}\n.musiclist.dialog .scroll-con ul li{\nfont-size:${.02*i}px;\nheight:${.045*i}px;\nline-height:${.045*i}px;\n}\n.dialog .scroll-con{\nheight:calc(100% - ${.06*i+1}px);\n}\n.musiclist.dialog .scroll-con  ul li>*{\nheight:${.045*i}px;\n}\n.musiclist.dialog .scroll-con  ul li .index,\n.musiclist.dialog .scroll-con  ul li .anim\n{\nwidth: ${.06*i}px;\n}\n.musiclist.dialog .scroll-con  ul li .name{\nwidth: calc(100% - ${.06*i}px);\n}\n.musiclist.dialog .scroll-con  ul li .anim div{\nheight:${.015*i}px;\nwidth:${.045*i*.05}px;\n}\n.musiclist.dialog .scroll-con  ul li .anim div:nth-child(1){\nleft:${.06*i*.375}px;\n}\n.musiclist.dialog .scroll-con  ul li .anim div:nth-child(2){\nleft:${.06*i*.525}px;\n}\n.musiclist.dialog .scroll-con  ul li .anim div:nth-child(3){\nleft:${.06*i*.675}px;\n}\n.musicinfo.dialog .d-c{\nfont-size:${.024*i}px;\n}\n.s-tag{\nfont-size:${.024*i*.75}px;\n}`;n.innerHTML=e}},rs:[],nowplay:-1,mid:null,musiclist:null,init:function(){var n=window.document;n.querySelector(".mbg img").onload=function(){this.style.opacity=1};var t=$(".page.player");function i(n,i){return t["querySelector"+(i?"All":"")](n)}function e(i){n.querySelector(".mbg img").style.opacity=0,sp.player.rs.forEach((function(n){n.abort()})),sp.player.nowplay=i,sp.player.mid=sp.player.musiclist[i].mid,r.img.src=g,$(".playing-mini img").src=g,r.title.innerText=r.album.innerText=r.info.title.innerText=r.info.album.innerText=r.info.pj.innerText=r.info.singer.innerText=r.singer.innerText="...",r.audio.src="",p={0:"正在加载"},sp.songs.actItem(sp.player.mid),a(),function(i){var e=sp.player.musiclist[i];i>=0&&(r.title.innerText=r.info.title.innerText=e.name,t.title=u=e.name,r.singer.innerText=r.info.singer.innerText=e.artist);sp.player.rs.push(musicapi.get(-1==i?lssong:e,(function(i){if(i.error)sp.player.notice("歌曲获取失败",(function(){alert(i.error)})),r.nextbtn.click();else{r.img.src=i.img;try{n.querySelector(".mbg img").src=i.img}catch(n){}$(".playing-mini img").src=i.img,r.title.innerText=r.info.title.innerText=i.songname,t.title=u=i.songname,r.audio.src=i.url,r.album.innerText=r.info.album.innerText=i.album,r.singer.innerText=r.info.singer.innerText=i.artist,p=i.lrc,(""==i.lrcstr||i.nolrc)&&e.tag&&-1!=e.tag.indexOf("纯音乐")&&(p={0:"纯音乐，请欣赏"}),a(),e.tag&&-1!=e.tag.indexOf("纯音乐")?t.classList.add("pure"):t.classList.remove("pure"),config.MAINCOLORBG&&sp.player.colorfulImg(i.minipic||i.img,(function(t,i,e){n.querySelector(".bg").style.background=t,config.MAINCOLORPLUS&&(n.getElementById("f").innerHTML=".siquan-player .container .right ul li{color:"+e[0][1]+"}.siquan-player,.siquan-player .container .right ul li.act{color:"+e[0][0]+"}.siquan-player .container .left .music-controls .range .r1,.siquan-player .container .left .music-controls .range .r2{background-color:"+e[0][0]+"}.siquan-player .container .left .music-controls .range{background-color:"+e[0][1]+"}body.dark .siquan-player .container .left .music-controls .range .r1,body.dark .siquan-player .container .left .music-controls .range .r2{background-color:"+e[1][0]+"}body.dark .siquan-player .container .left .music-controls .range{background-color:"+e[1][1]+"}body.dark .siquan-player .container .right ul li{color:"+e[1][1]+"}body.dark .siquan-player,body.dark .siquan-player .container .right ul li.act{color:"+e[1][0]+"}"),-1!=i&&(i&&0==s||!i&&1==s)&&r.mode.click()}));let o=i.minipic||i.img;if(o=o.replace("http://","https://"),"mediaSession"in navigator){let n=new MediaMetadata({title:i.songname,artist:i.artist,album:i.album||"",artwork:[{src:o,sizes:"256x256",type:"image/jpeg"}]});navigator.mediaSession.metadata=n}}})))}(i),function(n){var t=sp.player.musiclist[n];config.TAG&&(r.info.tags.innerHTML=t.tag.map((function(n){return'<span class="s-tag">'+n+"</span>"})).join(""));if(-1==n||!config.INFO||!config.ENABLED_MID)return;r.info.pj.innerText=sp.infolist[t.mid]||"暂无"}(i),localStorage.spNowplay=sp.player.musiclist[i].mid,localStorage.spMusiclist=sp.player.nowlistid}function a(){for(var n in r.lrc.innerHTML="",p){var i=t.createElement("li");i.innerText=p[n],r.lrc.append(i)}}t.getElementById=function(t){return n.getElementById(t)},t.body=n.body,t.documentElement=n.documentElement,t.head=n.head,t.createElement=function(t){return n.createElement(t)},Object.defineProperty(t,"title",{get:function(){return n.title},set:function(t){n.title=t}}),this.play=e;var s,r,o,l,c,u="我的音乐盒子",p={0:"歌词加载中"},g="https://image.gumengya.com/i/2023/10/15/652b46cf15392.png",d=!1,m=!0;config.ENABLED_MID=!0,r={img:i("#img"),title:i("#music-title"),album:i("#music-album"),singer:i("#music-singer"),audio:i("#audio"),range:{r1:i(".range .r1"),r2:i(".range .r2"),r:i(".range")},time:{cur:i(".time .l"),max:i(".time .r")},playbtn:i(".playbtn"),container:i(".siquan-player .container"),lrc:i(".right ul"),lastbtn:i(".lastbtn"),nextbtn:i(".nextbtn"),switchBtn:i(".sx"),fullBtn:i(".full"),mode:i(".mode"),musiclistbtn:i("#siquan-player-musiclist"),musicinfobtn:i("#siquan-player-musicinfo"),info:{title:i(".info-name"),album:i(".info-album"),singer:i(".info-singer"),tags:i(".info-tags .in"),pj:i(".info-pj .in"),tags_f:i(".info-tags"),pj_f:i(".info-pj")}},sp.player.el=r,window.addEventListener("resize",sp.player.resize),sp.player.resize(),config.AUTOPLAY&&r.audio.addEventListener("canplay",(function(){try{this.play()}catch(n){}})),r.audio.addEventListener("timeupdate",(function(){if(!d){var n=r.audio.currentTime,t=r.audio.duration,i=n/t;m&&(r.range.r2.style.width=100*i+"%",r.range.r1.style.left="calc("+100*i+"% - 6px)"),r.time.cur.innerText=sp.player.formatTime(n),r.time.max.innerText=sp.player.formatTime(t);var e=-1;for(var a in p){if(n<a)break;e++}var s,o=r.lrc.querySelector("li.act");if(-1!=e){if((s=r.lrc.querySelectorAll("li")[e]).classList.contains("act"))return l();o&&o.classList.remove("act"),s.classList.add("act")}else o&&o.classList.remove("act"),s=r.lrc.querySelector("li");l()}function l(){o=null;var n=s.offsetTop-r.lrc.offsetTop,t=$(".right").getBoundingClientRect().height/2-s.getBoundingClientRect().height/2;r.lrc.style.marginTop=t-n+"px",s=null}})),r.audio.addEventListener("play",(function(){r.container.classList.add("playing"),$(".playing-mini .img").classList.add("playing"),r.playbtn.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pause" viewBox="0 0 16 16">  <path d="M6 3.5a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0V4a.5.5 0 0 1 .5-.5m4 0a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0V4a.5.5 0 0 1 .5-.5"/></svg>'})),r.audio.addEventListener("pause",(function(){r.container.classList.remove("playing"),$(".playing-mini .img").classList.remove("playing"),r.playbtn.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-play-fill" viewBox="0 0 16 16">  <path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"/></svg>'})),r.audio.addEventListener("ended",(function(){1==o?(this.currentTime=0,this.play()):r.nextbtn.click()})),function(){r.img.onerror=$(".playing-mini img").onerror=function(){this.src=g},r.playbtn.addEventListener("click",(function(){r.container.classList.contains("playing")?r.audio.pause():r.audio.play()})),o=["order","loop","random"].indexOf(config.PLAY_MODE);var n=['<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-repeat" viewBox="0 0 16 16"><path d="M11 5.466V4H5a4 4 0 0 0-3.584 5.777.5.5 0 1 1-.896.446A5 5 0 0 1 5 3h6V1.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384l-2.36 1.966a.25.25 0 0 1-.41-.192Zm3.81.086a.5.5 0 0 1 .67.225A5 5 0 0 1 11 13H5v1.466a.25.25 0 0 1-.41.192l-2.36-1.966a.25.25 0 0 1 0-.384l2.36-1.966a.25.25 0 0 1 .41.192V12h6a4 4 0 0 0 3.585-5.777.5.5 0 0 1 .225-.67Z"/></svg>','<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-repeat-1" viewBox="0 0 16 16"><path d="M11 4v1.466a.25.25 0 0 0 .41.192l2.36-1.966a.25.25 0 0 0 0-.384l-2.36-1.966a.25.25 0 0 0-.41.192V3H5a5 5 0 0 0-4.48 7.223.5.5 0 0 0 .896-.446A4 4 0 0 1 5 4zm4.48 1.777a.5.5 0 0 0-.896.446A4 4 0 0 1 11 12H5.001v-1.466a.25.25 0 0 0-.41-.192l-2.36 1.966a.25.25 0 0 0 0 .384l2.36 1.966a.25.25 0 0 0 .41-.192V13h6a5 5 0 0 0 4.48-7.223Z"/><path d="M9 5.5a.5.5 0 0 0-.854-.354l-1.75 1.75a.5.5 0 1 0 .708.708L8 6.707V10.5a.5.5 0 0 0 1 0z"/></svg>','<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-shuffle" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M0 3.5A.5.5 0 0 1 .5 3H1c2.202 0 3.827 1.24 4.874 2.418.49.552.865 1.102 1.126 1.532.26-.43.636-.98 1.126-1.532C9.173 4.24 10.798 3 13 3v1c-1.798 0-3.173 1.01-4.126 2.082A9.624 9.624 0 0 0 7.556 8a9.624 9.624 0 0 0 1.317 1.918C9.828 10.99 11.204 12 13 12v1c-2.202 0-3.827-1.24-4.874-2.418A10.595 10.595 0 0 1 7 9.05c-.26.43-.636.98-1.126 1.532C4.827 11.76 3.202 13 1 13H.5a.5.5 0 0 1 0-1H1c1.798 0 3.173-1.01 4.126-2.082A9.624 9.624 0 0 0 6.444 8a9.624 9.624 0 0 0-1.317-1.918C4.172 5.01 2.796 4 1 4H.5a.5.5 0 0 1-.5-.5"/><path d="M13 5.466V1.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384l-2.36 1.966a.25.25 0 0 1-.41-.192zm0 9v-3.932a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384l-2.36 1.966a.25.25 0 0 1-.41-.192z"/></svg>'];r.switchBtn.innerHTML=n[o],r.nextbtn.addEventListener("click",(function(){-1!=sp.player.nowplay&&(2==o?e(Math.floor(Math.random()*sp.player.musiclist.length)):sp.player.nowplay==sp.player.musiclist.length-1?e(0):e(sp.player.nowplay+1))})),r.lastbtn.addEventListener("click",(function(){-1!=sp.player.nowplay&&(2==o?e(Math.floor(Math.random()*sp.player.musiclist.length)):0==sp.player.nowplay?e(sp.player.musiclist.length-1):e(sp.player.nowplay-1))})),r.switchBtn.addEventListener("click",(function(){2==o?o=0:o++,this.innerHTML=n[o]}))}(),r.range.r1.addEventListener("mousedown",(function(){var n;m=!1,t.onmousemove=function(t){var i=t.pageX,e=r.range.r.getBoundingClientRect().width,a=i-r.range.r.getBoundingClientRect().left;a<0&&(a=0),a>e&&(a=e),n=a/e,r.range.r2.style.width=100*n+"%",r.range.r1.style.left="calc("+100*n+"% - 6px)"},t.onmouseup=function(){t.onmousemove=null,t.onmouseup=null,m=!0,r.audio.currentTime=r.audio.duration*n}})),r.range.r1.addEventListener("touchstart",(function(){var n;function i(t){var i=t.targetTouches[0].pageX,e=r.range.r.getBoundingClientRect().width,a=i-r.range.r.getBoundingClientRect().left;a<0&&(a=0),a>e&&(a=e),n=a/e,r.range.r2.style.width=100*n+"%",r.range.r1.style.left="calc("+100*n+"% - 6px)"}m=!1,t.addEventListener("touchmove",i,{passive:!1}),t.addEventListener("touchend",(function e(){t.removeEventListener("touchmove",i),t.removeEventListener("touchend",e),m=!0,r.audio.currentTime=r.audio.duration*n}),{passive:!1})}),{passive:!1}),r.range.r.addEventListener("click",(function(n){if(m){var t=(n.pageX-r.range.r.getBoundingClientRect().left)/r.range.r.getBoundingClientRect().width;r.audio.currentTime=r.audio.duration*t}})),l=['<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-moon-fill" viewBox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278"/></svg>','<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-sun-fill" viewBox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8M8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0m0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13m8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5M3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8m10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0m-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707M4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/></svg>'],s=(c=["dark","light"]).indexOf(config.DEFAULT_MODE),t.body.classList.add(config.DEFAULT_MODE),r.mode.innerHTML=l[s],r.mode.addEventListener("click",(function(){t.body.classList.remove(c[s]),s=1==s?0:1,this.innerHTML=l[s],t.body.classList.add(c[s])})),r.musiclistbtn.addEventListener("click",(function(){if($(".playing-mini").style.right="0",null!=sp.songs.nowlist){sp.util.switchPage("songs");try{$(".page.songs .active").scrollIntoView({behavior:"smooth",block:"center"})}catch(n){}}else sp.util.switchPage("groups")})),r.musicinfobtn.addEventListener("click",(function(){i(".dialog.musicinfo").classList.add("show")})),r.fullBtn.addEventListener("click",(function(){n.fullscreenElement?n.exitFullscreen():t.documentElement.requestFullscreen()})),n.addEventListener("fullscreenchange",(function(){n.fullscreenElement?(r.fullBtn.querySelector(".full").style.display="block",r.fullBtn.querySelector(".unfull").style.display="none"):(r.fullBtn.querySelector(".unfull").style.display="block",r.fullBtn.querySelector(".full").style.display="none")})),t.querySelectorAll(".dialog .close").forEach((function(n){n.addEventListener("click",(function(){this.parentElement.parentElement.parentElement.parentElement.classList.remove("show")}))})),t.addEventListener("keydown",(function(n){" "==n.key?r.playbtn.click():"ArrowLeft"==n.key?r.lastbtn.click():"ArrowRight"==n.key&&r.nextbtn.click()})),"mediaSession"in navigator&&(navigator.mediaSession.setActionHandler("play",(function(){r.audio.play()})),navigator.mediaSession.setActionHandler("pause",(function(){r.audio.pause()})),navigator.mediaSession.setActionHandler("seekbackward",(function(){r.audio.currentTime-=10})),navigator.mediaSession.setActionHandler("seekforward",(function(){r.audio.currentTime+=10})),navigator.mediaSession.setActionHandler("previoustrack",(function(){r.lastbtn.click()})),navigator.mediaSession.setActionHandler("nexttrack",(function(){r.nextbtn.click()}))),config.PERFORMANCE_MODE&&(t.addEventListener("visibilitychange",(function(){var n=t.hidden;t.body.style.display=n?"none":""})),window.onfocus=function(){t.title=u,r.img.style.animationPlayState="",i(".playing-anim").style.display="",d=!1},window.onblur=function(){t.title="[性能模式冻结中]"+u,r.img.style.animationPlayState="paused",i(".playing-anim").style.display="none",d=!0}),config.TAG||(r.info.tags_f.style.display="none"),config.INFO||(r.info.pj_f.style.display="none"),config.BLURBG&&(n.querySelector(".mbg").style.display="block")}},init:function(){sp.ready.setState("正在加载歌单...","loading"),this.ready.init(),this.initer.initMusicList(),this.initer.initInfos(),this.initer.initGroups(),this.songs.init(),this.player.init(),$(".playing-mini").addEventListener("click",(function(){sp.util.switchPage("player"),this.style.right=""}))}},$=sp.util.query;sp.init();